<%
  field_classes = ['c-form-checkboxes__list']
  field_classes << local_assigns[:options].delete(:container_class) if local_assigns.dig(:options, :container_class)
%>
<% if local_assigns.key?(:label) %>
  <div class="c-form-checkboxes__label">
    <%= local_assigns[:label] %>
  </div>
<% end %>
<% if local_assigns.key?(:help_text) %>
  <div class="c-form-field__help-text">
    <%= local_assigns[:help_text] %>
  </div>
<% end %>
<div class="<%= field_classes.join(' ') %>">
  <% local_assigns[:checkboxes].each do |options| %>
  <%
    row_classes = ['c-form-checkboxes__checkbox']
    row_classes << options.delete(:container_class) if options.key?(:container_class)
  %>
    <%= local_assigns[:form].label(options[:property], class: row_classes.join(' ')) do %>
      <%= local_assigns[:form].check_box(options[:property], options.fetch(:options, {}), *options.fetch(:args, {})) %>
      <span><%= options[:label] %></span>
    <% end %>
  <% end %>
</div>
